import { ArticleLayout } from '@/components/ArticleLayout'

export const article = {
  author: 'Marcel Kalveram',
  date: '2018-09-27',
  title:
    'Speeding up the build of a surprise dinner app in React Native using Expo',
  description:
    'React Native can be hard. But a lot of the heavy lifting can be done by its open source companion toolchain Expo.',
}

export const metadata = {
  title: article.title,
  description: article.description,
  alternates: {
    canonical:
      'https://itnext.io/speeding-up-the-build-of-a-surprise-dinner-app-in-react-native-using-expo-2c18beabaaa7',
  },
}

export default (props) => <ArticleLayout article={article} {...props} />

<figure>
  <img
    width="4718"
    height="2982"
    src="https://cdn-images-1.medium.com/max/1200/0*WbacUV0jtenZXa46"
  />
  <figcaption>
    _"wine glasses on top of brown table near window" by [Todd
    Diemer](https://unsplash.com/@todd_diemer?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)_
  </figcaption>
</figure>

**This is the first post in a 4-part series about building the iOS and Android app for [uncovercity](https://uncovercity.com/) using React Native. You can find the other ones here:**

1. Speeding up the build of a surprise dinner app in React Native using Expo
2. [Battle testing a ridesharing API and React Native’s MapView in Expo](/articles/2018-10-01-battle-testing-a-ridesharing-api-and-react-natives-mapview-in-expo)
3. [Supporting multiple languages in React Native with Expo Localization](/articles/2018-11-05-supporting-multiple-languages-in-react-native-with-expos-localization-module)
4. [The intricacies of nesting navigators in React Native using react-navigation](/articles/2018-12-03-the-intricacies-of-nesting-navigators-in-react-native-using-react-navigation)

---

React Native can be hard. But a lot of the heavy lifting can be done by its open source companion toolchain [Expo](https://expo.io/).

Recently, I helped Spanish startup [uncovercity](https://uncovercity.com/) build a mobile app to augment their surprise dinner experience.

> If you’re a Spanish app store user, you can find the iOS version of the app [here](https://itunes.apple.com/us/app/uncovercity/id1394531362?l=es&ls=1&mt=8) and the Android version [here](https://play.google.com/store/apps/details?id=com.uncovercity.app). However to get the whole app experience, you’ll have to reserve a table on [https://uncovercity.com/](https://uncovercity.com/)

## The challenge

Tasks in this project included:

- showing an introductory video to the user to get them excited about the upcoming experience
- picking up the user at a specific location using a ride-sharing API and showing the current position of the client’s ride on a map
- showing several popups indicating the current status of the user’s experience (taxi on its way, taxi arrived, …) and sending a push notification for each status change

<figure>
  <div class="flex flex-col items-center justify-center sm:flex-row">
    <img
      width="377"
      height="744"
      src="https://cdn-images-1.medium.com/max/400/1*LxiNYd8Sa_4RiL1UZiMtXg.png"
    />
    <img
      width="377"
      height="744"
      src="https://cdn-images-1.medium.com/max/400/1*aKyIaJ3ufYwJEvUx6cqfZg.png"
    />
  </div>
  <figcaption>
    _Screenshots of the uncovercity app in action. From left to right:
    experience teaser with video, live map of the return journey, in-app status
    overlay_
  </figcaption>
</figure>

## The solution

I had built several React Native apps before and knew how tricky it would be to implement custom styling or third-party components.

That’s why I chose Expo in this case, because it provides several predefined components for each of the above mentioned scenarios by default:

- [Video](https://docs.expo.io/versions/v30.0.0/sdk/video): a relatively hassle-free integration of mp4 files
- [MapView](https://docs.expo.io/versions/v30.0.0/sdk/map-view) (based on React Native community’s [map component](https://github.com/react-community/react-native-maps))
- [a blurred modal](https://docs.expo.io/versions/v30.0.0/sdk/blur-view) (which doesn’t come with React Native by default).
- and [many others…](https://docs.expo.io/versions/latest/)

## The biggest time saver

The biggest time-saver was probably how easy Expo makes it to send push notifications. It’s almost too simple. See [this guide](https://docs.expo.io/versions/v30.0.0/guides/push-notifications), or let me sum it up quickly:

- grab a token on the phone by asking the user for notification permissions using Expo’s [Permissions](https://docs.expo.io/versions/v30.0.0/sdk/permissions) component
- send the obtained token to your backend and store it for subsequent requests
- use one of Expo’s push notification libraries ([node](https://github.com/exponent/exponent-server-sdk-node), [Ruby](https://github.com/exponent/exponent-server-sdk-ruby), [PHP](https://github.com/Alymosul/exponent-server-sdk-php) etc…) to trigger a notification from your backend application logic

> I’ve created a very simple [example of an Expo push notification server on GitHub](https://github.com/marcelkalveram/expo-push-notifications-server) using node.js and mongoDB.

Testing those notifications is easy (and fun) as well. You can use your phone-specific token and use the Expo [push notification tool](https://expo.io/dashboard/notifications) to send yourself some push notifications and play around with the parameters.

## Why am I saying this?

Many times, we think of native apps as complex systems with a lot of custom programming and the risk of having to dig deep into native iOS/Android code.

My experience in this case has been the complete opposite. Need a video component? Expo provides one out-of-the-box. Need a map integration? Expo has you covered. Need a push notification solution without spending a week on integrating it? Let me cite the Expo docs here: “it’s almost too easy”.

Even trivial things like using Expo’s [LinearGradient](https://docs.expo.io/versions/latest/sdk/linear-gradient) to show, well, a linear gradient, can save you some headaches here and there.

## What about testing?

To wrap up, testing the app on your phone is a piece of cake as well. [Expo Client](https://itunes.apple.com/us/app/expo-client/id982107779?mt=8) allows you to immediately preview and test the app on your phone within minutes, allowing you to see changes in real-time. Pretty awesome, isn’t it?

## Future posts about this project

I’m going to publish another post soon where I talk about my journey of building this app. It’ll cover how we did the API integration and what I learned from doing some real life user testing by living the experience as an uncovercity user myself.

_Originally published in [ITNEXT](https://itnext.io/speeding-up-the-build-of-a-surprise-dinner-app-in-react-native-using-expo-2c18beabaaa7) on September 27, 2018._
